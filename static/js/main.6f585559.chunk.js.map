{"version":3,"sources":["components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","components/Button/Button.js","components/Loader/Loader.js","utils/apiService.js","App.js","index.js"],"names":["Searchbar","state","searchQuery","handleChange","event","setState","target","value","onFormSubmit","preventDefault","props","onSubmit","this","className","type","onChange","autoComplete","autoFocus","placeholder","Component","PropTypes","func","isRequired","ImageGalleyItem","handleOnImageClick","id","dataset","onImgClick","webformatURL","description","onClick","src","alt","data-id","string","webFormatUrl","ImageGallery","data","map","tags","ImageGalleryItem","arrayOf","shape","modalRoot","document","querySelector","Modal","onBackdropCLickHandle","currentTarget","onClose","onEscapeCloseHandle","code","window","addEventListener","removeEventListener","createPortal","Button","text","Loader","color","height","width","query","page","pagination","axios","get","then","response","hits","App","images","showModal","activeImgId","error","isLoading","toggleModal","onSearchSubmit","onGalleryImgClick","handleLoadMore","findImageById","find","image","mapDataForState","shortid","generate","largeImageURL","prevProps","prevState","prevQuery","documentElement","scrollHeight","api","fetchImages","imageList","errorMessage","length","catch","finally","scrollTo","top","behavior","toLowerCase","activeImage","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6f585559.chunk.js","sourcesContent":["import { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass Searchbar extends Component {\r\n  state = { searchQuery: \"\" };\r\n\r\n  handleChange = (event) => {\r\n    this.setState({ searchQuery: event.target.value });\r\n  };\r\n\r\n  onFormSubmit = (event) => {\r\n    event.preventDefault();\r\n    this.props.onSubmit(this.state.searchQuery);\r\n    this.setState({ searchQuery: \"\" });\r\n  };\r\n\r\n  render() {\r\n    const { searchQuery } = this.state;\r\n\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.onFormSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            value={searchQuery}\r\n            onChange={this.handleChange}\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n\r\nPropTypes.Searchbar = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\n","import { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass ImageGalleyItem extends Component {\r\n  handleOnImageClick = (event) => {\r\n    const id = event.target.dataset.id;\r\n    this.props.onImgClick(id);\r\n  };\r\n\r\n  render() {\r\n    const { id, webformatURL, description } = this.props;\r\n\r\n    return (\r\n      <li className=\"ImageGalleryItem\">\r\n        <img\r\n          onClick={this.handleOnImageClick}\r\n          src={webformatURL}\r\n          alt={description}\r\n          className=\"ImageGalleryItem-image\"\r\n          data-id={id}\r\n        />\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageGalleyItem;\r\n\r\nPropTypes.ImageGalleyItem = {\r\n  id: PropTypes.string.isRequired,\r\n  webFormatUrl: PropTypes.string.isRequired,\r\n  description: PropTypes.string.isRequired,\r\n  onImgClick: PropTypes.func.isRequired,\r\n};\r\n","import PropTypes from \"prop-types\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem\";\r\n\r\nconst ImageGallery = ({ data, onImgClick }) => {\r\n  return (\r\n    <ul className=\"ImageGallery\">\r\n      {data.map(({ id, webformatURL, tags }) => {\r\n        return (\r\n          <ImageGalleryItem\r\n            onImgClick={onImgClick}\r\n            key={id}\r\n            id={id}\r\n            webformatURL={webformatURL}\r\n            description={tags}\r\n          />\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;\r\n\r\nPropTypes.ImageGallery = {\r\n  onImgClick: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.string.isRequired,\r\n      webFormatUrl: PropTypes.string.isRequired,\r\n      description: PropTypes.string.isRequired,\r\n    }).isRequired\r\n  ),\r\n};\r\n","import { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst modalRoot = document.querySelector(\"#image-modal\");\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.onEscapeCloseHandle);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.onEscapeCloseHandle);\r\n  }\r\n\r\n  onBackdropCLickHandle = (event) => {\r\n    if (event.target === event.currentTarget) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  onEscapeCloseHandle = (event) => {\r\n    if (event.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { src, alt } = this.props;\r\n\r\n    return createPortal(\r\n      <div onClick={this.onBackdropCLickHandle} className=\"Overlay\">\r\n        <div className=\"Modal\">\r\n          <img src={src} alt={alt} />\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n\r\nPropTypes.Modal = {\r\n  src: PropTypes.string.isRequired,\r\n  alt: PropTypes.string.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n};\r\n","import { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass Button extends Component {\r\n  render() {\r\n    const { text, onClick } = this.props;\r\n    return (\r\n      <button className=\"Button\" type=\"button\" onClick={onClick}>\r\n        {text}\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Button;\r\n\r\nPropTypes.Button = {\r\n  text: PropTypes.string.isRequired,\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n","import ReactLoader from \"react-loader-spinner\";\r\n\r\nconst Loader = () => {\r\n  return (\r\n    <div className=\"Loader\">\r\n      <ReactLoader type=\"ThreeDots\" color=\"#00BFFF\" height={80} width={80} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import axios from \"axios\";\r\nconst BASE_URL = \"https://pixabay.com/api/\";\r\nconst API_KEY = \"20678815-cff8880680826357b58c80b80\";\r\n\r\nclass ApiService {\r\n  fetchImages(query, page, pagination) {\r\n    return axios\r\n      .get(\r\n        `${BASE_URL}?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=${pagination}`\r\n      )\r\n      .then((response) => response.data.hits);\r\n  }\r\n}\r\n\r\nexport default new ApiService();\r\n","import { Component } from \"react\";\r\nimport shortid from \"shortid\";\r\nimport Searchbar from \"./components/Searchbar\";\r\nimport ImageGallery from \"./components/ImageGallery\";\r\nimport Modal from \"./components/Modal\";\r\nimport Button from \".//components/Button\";\r\nimport Loader from \"./components/Loader\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport api from \"./utils/apiService\";\r\n\r\nclass App extends Component {\r\n  state = {\r\n    images: [],\r\n    searchQuery: \"\",\r\n    page: 1,\r\n    showModal: false,\r\n    activeImgId: \"\",\r\n    error: \"\",\r\n    isLoading: false,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { searchQuery, page } = this.state;\r\n    const prevQuery = prevState.searchQuery;\r\n    const prevPage = prevState.page;\r\n\r\n    if (page !== prevPage) {\r\n      const height = document.documentElement.scrollHeight - 150;\r\n      this.setState({ isLoading: true });\r\n\r\n      api\r\n        .fetchImages(searchQuery, page, 12)\r\n        .then((data) => {\r\n          const imageList = this.mapDataForState(data);\r\n          const errorMessage = imageList.length < 1 ? \"No more images :(\" : \"\";\r\n          this.setState(({ images }) => {\r\n            return { images: [...images, ...imageList], error: errorMessage };\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          this.setState({ error: \"Oops! Something went wrong...\" });\r\n        })\r\n        .finally(() => {\r\n          this.setState({ isLoading: false });\r\n          window.scrollTo({\r\n            top: height,\r\n            behavior: \"smooth\",\r\n          });\r\n        });\r\n    }\r\n\r\n    if (searchQuery.toLowerCase() !== prevQuery.toLowerCase()) {\r\n      this.setState({ images: [], isLoading: true });\r\n\r\n      api\r\n        .fetchImages(searchQuery, 1, 12)\r\n        .then((data) => {\r\n          const imageList = this.mapDataForState(data);\r\n          const errorMessage = imageList.length < 1 ? \"No matches found:(\" : \"\";\r\n          this.setState({ images: imageList, error: errorMessage });\r\n        })\r\n        .catch((error) => {\r\n          this.setState({ error: \"Oops! Something went wrong...\" });\r\n        })\r\n        .finally(() => {\r\n          this.setState({ isLoading: false });\r\n          window.scrollTo({\r\n            top: 0,\r\n            behavior: \"smooth\",\r\n          });\r\n        });\r\n    }\r\n  }\r\n\r\n  toggleModal = () => {\r\n    this.setState(({ showModal }) => {\r\n      return {\r\n        showModal: !showModal,\r\n      };\r\n    });\r\n  };\r\n\r\n  onSearchSubmit = (query) => {\r\n    this.setState({ searchQuery: query });\r\n  };\r\n\r\n  onGalleryImgClick = (id) => {\r\n    this.setState({ activeImgId: id, showModal: true });\r\n  };\r\n\r\n  handleLoadMore = () => {\r\n    this.setState(({ page }) => {\r\n      return { page: page + 1 };\r\n    });\r\n  };\r\n\r\n  findImageById = (id) => {\r\n    if (!id) return null;\r\n    const image = this.state.images.find((image) => image.id === id);\r\n    return image;\r\n  };\r\n\r\n  // set unique id for each image object to except APIserver issue - repeating images with same id\r\n  mapDataForState = (data) => {\r\n    return data.map((image) => {\r\n      return {\r\n        id: shortid.generate(),\r\n        webformatURL: image.webformatURL,\r\n        largeImageURL: image.largeImageURL,\r\n        tags: image.tags,\r\n      };\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { images, showModal, activeImgId, error, isLoading } = this.state;\r\n    const activeImage = this.findImageById(activeImgId);\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <Searchbar onSubmit={this.onSearchSubmit} />\r\n        <ImageGallery data={images} onImgClick={this.onGalleryImgClick} />\r\n        {isLoading && <Loader />}\r\n        {images.length > 0 && !error && !isLoading && (\r\n          <Button text=\"Load More\" onClick={this.handleLoadMore} />\r\n        )}\r\n\r\n        {showModal && activeImage && (\r\n          <Modal\r\n            src={activeImage.largeImageURL}\r\n            alt={activeImage.tags}\r\n            onClose={this.toggleModal}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"modern-normalize\";\r\nimport \"./styles.scss\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}