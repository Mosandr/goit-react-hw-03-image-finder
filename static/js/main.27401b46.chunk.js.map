{"version":3,"sources":["components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","components/Button/Button.js","utils/apiService.js","App.js","index.js"],"names":["Searchbar","state","searchQuery","handleChange","event","setState","target","value","onFormSubmit","preventDefault","props","onSubmit","this","className","type","onChange","autoComplete","autoFocus","placeholder","Component","PropTypes","func","isRequired","ImageGalleyItem","handleOnImageClick","id","dataset","onImgClick","webformatURL","description","onClick","src","alt","data-id","string","webFormatUrl","ImageGallery","data","map","tags","ImageGalleryItem","arrayOf","shape","modalRoot","document","querySelector","Modal","onBackdropCLickHandle","currentTarget","onClose","onEscapeCloseHandle","code","window","addEventListener","removeEventListener","createPortal","Button","text","query","page","pagination","axios","get","then","response","hits","App","images","showModal","activeImgId","error","isLoading","toggleModal","onSearchSubmit","onGalleryImgClick","handleLoadMore","findImageById","find","image","mapDataForState","shortid","generate","largeImageURL","prevProps","prevState","a","prevQuery","prevPage","height","documentElement","scrollHeight","api","fetchImages","imageList","errorMessage","length","catch","finally","scrollTo","top","behavior","toLowerCase","activeImage","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.27401b46.chunk.js","sourcesContent":["import { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass Searchbar extends Component {\r\n  state = { searchQuery: \"\" };\r\n\r\n  handleChange = (event) => {\r\n    this.setState({ searchQuery: event.target.value });\r\n  };\r\n\r\n  onFormSubmit = (event) => {\r\n    event.preventDefault();\r\n    this.props.onSubmit(this.state.searchQuery);\r\n    this.setState({ searchQuery: \"\" });\r\n  };\r\n\r\n  render() {\r\n    const { searchQuery } = this.state;\r\n\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.onFormSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            value={searchQuery}\r\n            onChange={this.handleChange}\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n\r\nPropTypes.Searchbar = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\n","import { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass ImageGalleyItem extends Component {\r\n  handleOnImageClick = (event) => {\r\n    const id = event.target.dataset.id;\r\n    this.props.onImgClick(id);\r\n  };\r\n\r\n  render() {\r\n    const { id, webformatURL, description } = this.props;\r\n\r\n    return (\r\n      <li className=\"ImageGalleryItem\">\r\n        <img\r\n          onClick={this.handleOnImageClick}\r\n          src={webformatURL}\r\n          alt={description}\r\n          className=\"ImageGalleryItem-image\"\r\n          data-id={id}\r\n        />\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageGalleyItem;\r\n\r\nPropTypes.ImageGalleyItem = {\r\n  id: PropTypes.string.isRequired,\r\n  webFormatUrl: PropTypes.string.isRequired,\r\n  description: PropTypes.string.isRequired,\r\n  onImgClick: PropTypes.func.isRequired,\r\n};\r\n","import PropTypes from \"prop-types\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem\";\r\n\r\nconst ImageGallery = ({ data, onImgClick }) => {\r\n  return (\r\n    <ul className=\"ImageGallery\">\r\n      {data.map(({ id, webformatURL, tags }) => {\r\n        return (\r\n          <ImageGalleryItem\r\n            onImgClick={onImgClick}\r\n            key={id}\r\n            id={id}\r\n            webformatURL={webformatURL}\r\n            description={tags}\r\n          />\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;\r\n\r\nPropTypes.ImageGallery = {\r\n  onImgClick: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.string.isRequired,\r\n      webFormatUrl: PropTypes.string.isRequired,\r\n      description: PropTypes.string.isRequired,\r\n    }).isRequired\r\n  ),\r\n};\r\n","import { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst modalRoot = document.querySelector(\"#image-modal\");\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.onEscapeCloseHandle);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.onEscapeCloseHandle);\r\n  }\r\n\r\n  onBackdropCLickHandle = (event) => {\r\n    if (event.target === event.currentTarget) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  onEscapeCloseHandle = (event) => {\r\n    if (event.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { src, alt } = this.props;\r\n\r\n    return createPortal(\r\n      <div onClick={this.onBackdropCLickHandle} className=\"Overlay\">\r\n        <div className=\"Modal\">\r\n          <img src={src} alt={alt} />\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n\r\nPropTypes.Modal = {\r\n  src: PropTypes.string.isRequired,\r\n  alt: PropTypes.string.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n};\r\n","import { Component } from \"react\";\r\n\r\nclass Button extends Component {\r\n  render() {\r\n    const { text, onClick } = this.props;\r\n    return (\r\n      <button className=\"Button\" type=\"button\" onClick={onClick}>\r\n        {text}\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Button;\r\n","import axios from \"axios\";\r\nconst BASE_URL = \"https://pixabay.com/api/\";\r\nconst API_KEY = \"20678815-cff8880680826357b58c80b80\";\r\n\r\nclass ApiService {\r\n  fetchImages(query, page, pagination) {\r\n    return axios\r\n      .get(\r\n        `${BASE_URL}?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=${pagination}`\r\n      )\r\n      .then((response) => response.data.hits);\r\n  }\r\n}\r\n\r\nexport default new ApiService();\r\n","import { Component } from \"react\";\r\nimport shortid from \"shortid\";\r\nimport Searchbar from \"./components/Searchbar\";\r\nimport ImageGallery from \"./components/ImageGallery\";\r\nimport Modal from \"./components/Modal\";\r\nimport Button from \".//components/Button\";\r\n// import Loader from \"./components/Loader\";\r\n// import \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport api from \"./utils/apiService\";\r\n\r\nclass App extends Component {\r\n  state = {\r\n    images: [],\r\n    searchQuery: \"\",\r\n    page: 1,\r\n    showModal: false,\r\n    activeImgId: \"\",\r\n    error: \"\",\r\n    isLoading: false,\r\n  };\r\n\r\n  async componentDidUpdate(prevProps, prevState) {\r\n    const { searchQuery, page } = this.state;\r\n    const prevQuery = prevState.searchQuery;\r\n    const prevPage = prevState.page;\r\n\r\n    if (page !== prevPage) {\r\n      const height = document.documentElement.scrollHeight - 150;\r\n\r\n      await api\r\n        .fetchImages(searchQuery, page, 12)\r\n        .then((data) => {\r\n          const imageList = this.mapDataForState(data);\r\n          const errorMessage = imageList.length < 1 ? \"No more images :(\" : \"\";\r\n          this.setState(({ images }) => {\r\n            return { images: [...images, ...imageList], error: errorMessage };\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          this.setState({ error: \"Oops! Something went wrong...\" });\r\n        })\r\n        .finally(this.setState({ isLoading: false }));\r\n\r\n      window.scrollTo({\r\n        top: height,\r\n        behavior: \"smooth\",\r\n      });\r\n    }\r\n\r\n    if (searchQuery.toLowerCase() !== prevQuery.toLowerCase()) {\r\n      this.setState({ isLoading: true });\r\n\r\n      await api\r\n        .fetchImages(searchQuery, 1, 12)\r\n        .then((data) => {\r\n          const imageList = this.mapDataForState(data);\r\n          const errorMessage = imageList.length < 1 ? \"No matches found:(\" : \"\";\r\n          this.setState({ images: imageList, error: errorMessage });\r\n        })\r\n        .catch((error) => {\r\n          this.setState({ error: \"Oops! Something went wrong...\" });\r\n        })\r\n        .finally(this.setState({ isLoading: false }));\r\n\r\n      window.scrollTo({\r\n        top: 0,\r\n        behavior: \"smooth\",\r\n      });\r\n    }\r\n  }\r\n\r\n  toggleModal = () => {\r\n    this.setState(({ showModal }) => {\r\n      return {\r\n        showModal: !showModal,\r\n      };\r\n    });\r\n  };\r\n\r\n  onSearchSubmit = (query) => {\r\n    this.setState({ searchQuery: query });\r\n  };\r\n\r\n  onGalleryImgClick = (id) => {\r\n    this.setState({ activeImgId: id, showModal: true });\r\n  };\r\n\r\n  handleLoadMore = () => {\r\n    this.setState(({ page }) => {\r\n      return { page: page + 1 };\r\n    });\r\n  };\r\n\r\n  findImageById = (id) => {\r\n    if (!id) return null;\r\n    const image = this.state.images.find((image) => image.id === id);\r\n    return image;\r\n  };\r\n\r\n  // set unique id for each image object to except APIserver issue - repeating images with same id\r\n  mapDataForState = (data) => {\r\n    return data.map((image) => {\r\n      return {\r\n        id: shortid.generate(),\r\n        webformatURL: image.webformatURL,\r\n        largeImageURL: image.largeImageURL,\r\n        tags: image.tags,\r\n      };\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { images, showModal, activeImgId, error, isLoading } = this.state;\r\n    const activeImage = this.findImageById(activeImgId);\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <Searchbar onSubmit={this.onSearchSubmit} />\r\n        <ImageGallery data={images} onImgClick={this.onGalleryImgClick} />\r\n        {/* {isLoading && <Loader />} */}\r\n        {images.length > 0 && !error && !isLoading && (\r\n          <Button text=\"Load More\" onClick={this.handleLoadMore} />\r\n        )}\r\n\r\n        {showModal && activeImage && (\r\n          <Modal\r\n            src={activeImage.largeImageURL}\r\n            alt={activeImage.tags}\r\n            onClose={this.toggleModal}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"modern-normalize\";\r\nimport \"./styles.scss\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}