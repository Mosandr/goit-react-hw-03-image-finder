{"version":3,"sources":["components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Modal/Modal.js","components/Button/Button.js","components/Loader/Loader.js","components/Notification/Notification.js","utils/apiService.js","App.js","index.js"],"names":["Searchbar","state","searchQuery","handleChange","event","setState","target","value","onFormSubmit","preventDefault","props","onSubmit","this","className","type","onChange","autoComplete","autoFocus","placeholder","Component","PropTypes","func","isRequired","ImageGalleyItem","id","webformatURL","description","onImgClick","onClick","src","alt","string","webFormatUrl","ImageGallery","data","map","tags","ImageGalleryItem","arrayOf","shape","modalRoot","document","querySelector","Modal","onBackdropCLickHandle","currentTarget","onClose","onEscapeCloseHandle","code","window","addEventListener","removeEventListener","createPortal","Button","text","Loader","color","height","width","notificationRoot","Notification","query","page","pagination","axios","get","then","response","hits","App","images","showModal","activeImgId","error","isLoading","toggleModal","onSearchSubmit","onGalleryImgClick","handleLoadMore","findImageById","find","image","mapDataForState","shortid","generate","largeImageURL","prevProps","prevState","prevQuery","documentElement","scrollHeight","api","fetchImages","imageList","errorMessage","length","catch","finally","scrollTo","top","behavior","toLowerCase","activeImage","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.44030abe.chunk.js","sourcesContent":["import { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass Searchbar extends Component {\r\n  state = { searchQuery: \"\" };\r\n\r\n  handleChange = (event) => {\r\n    this.setState({ searchQuery: event.target.value });\r\n  };\r\n\r\n  onFormSubmit = (event) => {\r\n    event.preventDefault();\r\n    this.props.onSubmit(this.state.searchQuery);\r\n    this.setState({ searchQuery: \"\" });\r\n  };\r\n\r\n  render() {\r\n    const { searchQuery } = this.state;\r\n\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.onFormSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            value={searchQuery}\r\n            onChange={this.handleChange}\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n\r\nPropTypes.Searchbar = {\r\n  onSubmit: PropTypes.func.isRequired,\r\n};\r\n","import { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass ImageGalleyItem extends Component {\r\n  render() {\r\n    const { id, webformatURL, description, onImgClick } = this.props;\r\n\r\n    return (\r\n      <li className=\"ImageGalleryItem\">\r\n        <img\r\n          onClick={() => onImgClick(id)}\r\n          src={webformatURL}\r\n          alt={description}\r\n          className=\"ImageGalleryItem-image\"\r\n        />\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageGalleyItem;\r\n\r\nPropTypes.ImageGalleyItem = {\r\n  id: PropTypes.string.isRequired,\r\n  webFormatUrl: PropTypes.string.isRequired,\r\n  description: PropTypes.string.isRequired,\r\n  onImgClick: PropTypes.func.isRequired,\r\n};\r\n","import PropTypes from \"prop-types\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem\";\r\n\r\nconst ImageGallery = ({ data, onImgClick }) => {\r\n  return (\r\n    <ul className=\"ImageGallery\">\r\n      {data.map(({ id, webformatURL, tags }) => {\r\n        return (\r\n          <ImageGalleryItem\r\n            onImgClick={onImgClick}\r\n            key={id}\r\n            id={id}\r\n            webformatURL={webformatURL}\r\n            description={tags}\r\n          />\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;\r\n\r\nPropTypes.ImageGallery = {\r\n  onImgClick: PropTypes.func.isRequired,\r\n  data: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.string.isRequired,\r\n      webFormatUrl: PropTypes.string.isRequired,\r\n      description: PropTypes.string.isRequired,\r\n    }).isRequired\r\n  ),\r\n};\r\n","import { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst modalRoot = document.querySelector(\"#image-modal\");\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.onEscapeCloseHandle);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.onEscapeCloseHandle);\r\n  }\r\n\r\n  onBackdropCLickHandle = (event) => {\r\n    if (event.target === event.currentTarget) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  onEscapeCloseHandle = (event) => {\r\n    if (event.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { src, alt } = this.props;\r\n\r\n    return createPortal(\r\n      <div onClick={this.onBackdropCLickHandle} className=\"Overlay\">\r\n        <div className=\"Modal\">\r\n          <img src={src} alt={alt} />\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n\r\nPropTypes.Modal = {\r\n  src: PropTypes.string.isRequired,\r\n  alt: PropTypes.string.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n};\r\n","import { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nclass Button extends Component {\r\n  render() {\r\n    const { text, onClick } = this.props;\r\n    return (\r\n      <button className=\"Button\" type=\"button\" onClick={onClick}>\r\n        {text}\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Button;\r\n\r\nPropTypes.Button = {\r\n  text: PropTypes.string.isRequired,\r\n  onClick: PropTypes.func.isRequired,\r\n};\r\n","import ReactLoader from \"react-loader-spinner\";\r\n\r\nconst Loader = () => {\r\n  return (\r\n    <div className=\"Loader\">\r\n      <ReactLoader type=\"ThreeDots\" color=\"#00BFFF\" height={80} width={80} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { createPortal } from \"react-dom/cjs/react-dom.development\";\r\nimport { render } from \"@testing-library/react\";\r\n\r\nconst notificationRoot = document.querySelector(\"#notification\");\r\n\r\nclass Notification extends Component {\r\n  render() {\r\n    const { text, type } = this.props;\r\n    return createPortal(<div className={type}>{text}</div>, notificationRoot);\r\n  }\r\n}\r\n\r\nexport default Notification;\r\n\r\nPropTypes.Notification = {\r\n  type: PropTypes.string.isRequired,\r\n  text: PropTypes.string.isRequired,\r\n};\r\n","import axios from \"axios\";\r\nconst BASE_URL = \"https://pixabay.com/api/\";\r\nconst API_KEY = \"20678815-cff8880680826357b58c80b80\";\r\n\r\nclass ApiService {\r\n  fetchImages(query, page, pagination) {\r\n    return axios\r\n      .get(\r\n        `${BASE_URL}?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=${pagination}`\r\n      )\r\n      .then((response) => response.data.hits);\r\n  }\r\n}\r\n\r\nexport default new ApiService();\r\n","import { Component } from \"react\";\r\nimport shortid from \"shortid\";\r\nimport Searchbar from \"./components/Searchbar\";\r\nimport ImageGallery from \"./components/ImageGallery\";\r\nimport Modal from \"./components/Modal\";\r\nimport Button from \".//components/Button\";\r\nimport Loader from \"./components/Loader\";\r\nimport Notification from \"./components/Notification\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport api from \"./utils/apiService\";\r\n\r\nclass App extends Component {\r\n  state = {\r\n    images: [],\r\n    searchQuery: \"\",\r\n    page: 1,\r\n    showModal: false,\r\n    activeImgId: \"\",\r\n    error: \"\",\r\n    isLoading: false,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { searchQuery, page } = this.state;\r\n    const prevQuery = prevState.searchQuery;\r\n    const prevPage = prevState.page;\r\n\r\n    if (page !== prevPage) {\r\n      const height = document.documentElement.scrollHeight - 150;\r\n      this.setState({ isLoading: true });\r\n\r\n      api\r\n        .fetchImages(searchQuery, page, 12)\r\n        .then((data) => {\r\n          const imageList = this.mapDataForState(data);\r\n          const errorMessage = imageList.length < 1 ? \"No more images :(\" : \"\";\r\n          this.setState(({ images }) => {\r\n            return { images: [...images, ...imageList], error: errorMessage };\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          this.setState({ error: \"Oops! Something went wrong...\" });\r\n        })\r\n        .finally(() => {\r\n          this.setState({ isLoading: false });\r\n          window.scrollTo({\r\n            top: height,\r\n            behavior: \"smooth\",\r\n          });\r\n        });\r\n    }\r\n\r\n    if (searchQuery.toLowerCase() !== prevQuery.toLowerCase()) {\r\n      this.setState({ images: [], isLoading: true });\r\n\r\n      api\r\n        .fetchImages(searchQuery, 1, 12)\r\n        .then((data) => {\r\n          const imageList = this.mapDataForState(data);\r\n          const errorMessage = imageList.length < 1 ? \"No matches found:(\" : \"\";\r\n          this.setState({ images: imageList, error: errorMessage });\r\n        })\r\n        .catch((error) => {\r\n          this.setState({ error: \"Oops! Something went wrong...\" });\r\n        })\r\n        .finally(() => {\r\n          this.setState({ isLoading: false });\r\n          window.scrollTo({\r\n            top: 0,\r\n            behavior: \"smooth\",\r\n          });\r\n        });\r\n    }\r\n  }\r\n\r\n  toggleModal = () => {\r\n    this.setState(({ showModal }) => {\r\n      return {\r\n        showModal: !showModal,\r\n      };\r\n    });\r\n  };\r\n\r\n  onSearchSubmit = (query) => {\r\n    this.setState({ searchQuery: query });\r\n  };\r\n\r\n  onGalleryImgClick = (id) => {\r\n    this.setState({ activeImgId: id, showModal: true });\r\n  };\r\n\r\n  handleLoadMore = () => {\r\n    this.setState(({ page }) => {\r\n      return { page: page + 1 };\r\n    });\r\n  };\r\n\r\n  findImageById = (id) => {\r\n    if (!id) return null;\r\n    const image = this.state.images.find((image) => image.id === id);\r\n    return image;\r\n  };\r\n\r\n  // set unique id for each image object to except APIserver issue - repeating images with same id\r\n  mapDataForState = (data) => {\r\n    return data.map((image) => {\r\n      return {\r\n        id: shortid.generate(),\r\n        webformatURL: image.webformatURL,\r\n        largeImageURL: image.largeImageURL,\r\n        tags: image.tags,\r\n      };\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { images, showModal, activeImgId, error, isLoading } = this.state;\r\n    const activeImage = this.findImageById(activeImgId);\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <Searchbar onSubmit={this.onSearchSubmit} />\r\n        <ImageGallery data={images} onImgClick={this.onGalleryImgClick} />\r\n        {isLoading && <Loader />}\r\n        {images.length > 0 && !error && !isLoading && (\r\n          <Button text=\"Load More\" onClick={this.handleLoadMore} />\r\n        )}\r\n\r\n        {showModal && activeImage && (\r\n          <Modal\r\n            src={activeImage.largeImageURL}\r\n            alt={activeImage.tags}\r\n            onClose={this.toggleModal}\r\n          />\r\n        )}\r\n        {error && <Notification text={error} type=\"error\" />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"modern-normalize\";\r\nimport \"./styles.scss\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}